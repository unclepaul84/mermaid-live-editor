function E(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function O(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{},a=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(t){E(e,t,i[t])})}return e}var $={trackingId:null,debug:!1,anonymizeIp:!1,customDimensions:{},resetCustomDimensionsOnPage:[],setCustomDimensionsToPage:!0},x={};function C(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=!1,i=T(e),a=i.instanceName,t=i.instancePrefix;return{name:"google-analytics",config:O({},$,e),initialize:function(s){var r=s.config,g=s.instance;if(!r.trackingId)throw new Error("No GA trackingId defined");var y=r.customDimensions,c=r.customScriptSrc,f=c||"https://www.google-analytics.com/analytics.js";if(P(f)&&function(u,m,w,I,l,v,D){u.GoogleAnalyticsObject=l,u[l]=u[l]||function(){(u[l].q=u[l].q||[]).push(arguments)},u[l].l=1*new Date,v=m.createElement(w),D=m.getElementsByTagName(w)[0],v.async=1,v.src=I,D.parentNode.insertBefore(v,D)}(window,document,"script",f,"ga"),!x[a]){var d=O({cookieDomain:r.domain||"auto",siteSpeedSampleRate:r.siteSpeedSampleRate||1,sampleRate:r.sampleRate||100,allowLinker:!0},r.cookieConfig);if(a&&(d.name=a),ga("create",r.trackingId,d),r.debug&&(ga("".concat(t,"set"),"sendHitTask",null),window.ga_debug={trace:!0}),r.anonymizeIp&&ga("".concat(t,"set"),"anonymizeIp",!0),r.tasks){var b=["customTask","previewTask","checkProtocolTask","validationTask","checkStorageTask","historyImportTask","samplerTask","buildHitTask","sendHitTask","timingTask","displayFeaturesTask"];b.forEach(function(u){if(r.tasks.hasOwnProperty(u)){var m=r.tasks[u];typeof m=="function"?ga(r.tasks[u]):m===null&&ga("".concat(t,"set"),u,m)}})}var h=g.user()||{},p=h.traits||{};if(Object.keys(p).length&&y&&Object.keys(y).length){var k=S(p,r);ga("".concat(t,"set"),k)}x[a]=!0}},page:function(s){var r=s.payload,g=s.config,y=s.instance,c=r.properties,f=g.resetCustomDimensionsOnPage,d=g.customDimensions,b=y.getState("context.campaign");if(!P()){if(f&&f.length){var h=f.reduce(function(l,v){return d[v]&&(l[d[v]]=null),l},{});Object.keys(h).length&&ga("".concat(t,"set"),h)}var p=c.path||document.location.pathname,k={page:p,title:c.title,location:c.url},u={page:p,title:c.title};c.referrer!==document.referrer&&(u.referrer=c.referrer);var m=z(b),w=N(c,g,t),I=O({},k,m,w);ga("".concat(t,"set"),u),n&&delete I.location,ga("".concat(t,"send"),"pageview",I),n=!0}},track:function(s){var r=s.payload,g=s.config,y=s.instance,c=r.properties,f=r.event,d=c.label,b=c.value,h=c.category,p=c.nonInteraction,k=y.getState("context.campaign");j({hitType:"event",event:f,label:d,category:h||"All",value:b,nonInteraction:p,campaign:k},g,r)},identify:function(s){var r=s.payload,g=s.config;A(r.userId,r.traits,g)},loaded:function(){return!!window.gaplugins}}}function P(e){return e?!R(e):typeof ga=="undefined"}function T(e){var n=e.instanceName;return{instancePrefix:n?"".concat(n,"."):"",instanceName:n}}function j(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!P()){var a=T(n),t=a.instancePrefix,o={hitType:e.hitType||"event",eventAction:e.event,eventLabel:e.label,eventCategory:e.category||"All",nonInteraction:e.nonInteraction!==void 0?!!e.nonInteraction:!1};e.value&&(o.eventValue=q(e.value));var s=z(e),r=N(i.properties,n,t),g=O({},o,s,r);return ga("".concat(t,"send"),"event",g),g}}function z(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={},i=e.name,a=e.source,t=e.medium,o=e.content,s=e.keyword;return i&&(n.campaignName=i),a&&(n.campaignSource=a),t&&(n.campaignMedium=t),o&&(n.campaignContent=o),s&&(n.campaignKeyword=s),n}function S(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.customDimensions;return Object.keys(i).reduce(function(a,t){var o=i[t],s=L(e,t)||e[t];return typeof s=="boolean"&&(s=s.toString()),(s||s===0)&&(a[o]=s),a},{})}function L(e,n,i,a,t){for(n=n.split?n.split("."):n,a=0;a<n.length;a++)e=e?e[n[a]]:t;return e===t?i:e}function N(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=S(e,n);return Object.keys(a).length?n.setCustomDimensionsToPage?(ga("".concat(i,"set"),a),{}):a:{}}function A(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!P()){var a=T(i),t=a.instancePrefix;if(e&&ga("".concat(t,"set"),"userId",e),Object.keys(n).length){var o=S(n,i);ga("".concat(t,"set"),o)}}}function R(e){var n=document.querySelectorAll("script[src]");return!!Object.keys(n).filter(function(i){return(n[i].src||"")===e}).length}function q(e){return!e||e<0?0:Math.round(e)}var H=C,V=C,B=void 0,G=void 0,M=j,F=A;export{H as default,F as identify,V as init,B as initialize,G as page,M as track};
