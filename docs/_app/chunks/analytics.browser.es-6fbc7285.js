function Ke(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}var Ze,Ee="undefined",Qe="object",Ye="any",et="*",te="__",De=typeof process!="undefined"?process:{};(Ze=De.env)==null||Ze.NODE_ENV;var W=typeof window!="undefined";De.versions!=null&&De.versions.node!=null;typeof Deno!="undefined"&&Deno.core;W&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Oe(e,t){return typeof t===e}var H=Oe.bind(null,"function"),he=Oe.bind(null,"string"),ce=Oe.bind(null,"undefined"),Ct=Oe.bind(null,"boolean");function Lt(e){return Object.prototype.toString.call(e)==="[object Array]"}function qt(e){return e&&(typeof e=="object"||e!==null)}function F(e){if(!qt(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function tt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Vt(){if(W){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function Rt(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function Jt(e){return function(t){for(var n,r=Object.create(null),o=/([^&=]+)=?([^&]*)/g;n=o.exec(t);){var u=tt(n[1]),c=tt(n[2]);u.substring(u.length-2)==="[]"?(r[u=u.substring(0,u.length-2)]||(r[u]=[])).push(c):r[u]=c===""||c}for(var f in r){var y=f.split("[");y.length>1&&(Bt(r,y.map(function(v){return v.replace(/[?[\]\\ ]/g,"")}),r[f]),delete r[f])}return r}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return W&&window.location.search.substring(1)}(e))}function Bt(e,t,n){for(var r=t.length-1,o=0;o<r;++o){var u=t[o];if(u==="__proto__"||u==="constructor")break;u in e||(e[u]={}),e=e[u]}e[t[r]]=n}function xe(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],o=15&n;e+=r=="-"||r=="4"?r:(r=="x"?o:3&o|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var ye="global",se=te+"global"+te,le=typeof self===Qe&&self.self===self&&self||typeof global===Qe&&global.global===global&&global||void 0;function ne(e){return le[se][e]}function re(e,t){return le[se][e]=t}function fe(e){delete le[se][e]}function de(e,t,n){var r;try{if(Ue(e)){var o=window[e];r=o[t].bind(o)}}catch{}return r||n}le[se]||(le[se]={});var je={};function Ue(e){if(typeof je[e]!==Ee)return je[e];try{var t=window[e];t.setItem(Ee,Ee),t.removeItem(Ee)}catch{return je[e]=!1}return je[e]=!0}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var Q="function",K="undefined",Ft="@@redux/"+Math.random().toString(36),nt=function(){return typeof Symbol===Q&&Symbol.observable||"@@observable"}(),Ne=" != "+Q;function rt(e,t,n){var r;if(typeof t===Q&&typeof n===K&&(n=t,t=void 0),typeof n!==K){if(typeof n!==Q)throw new Error("enhancer"+Ne);return n(rt)(e,t)}if(typeof e!==Q)throw new Error("reducer"+Ne);var o=e,u=t,c=[],f=c,y=!1;function v(){f===c&&(f=c.slice())}function A(){return u}function d(m){if(typeof m!==Q)throw new Error("Listener"+Ne);var T=!0;return v(),f.push(m),function(){if(T){T=!1,v();var I=f.indexOf(m);f.splice(I,1)}}}function N(m){if(!F(m))throw new Error("Act != obj");if(typeof m.type===K)throw new Error("ActType "+K);if(y)throw new Error("Dispatch in reducer");try{y=!0,u=o(u,m)}finally{y=!1}for(var T=c=f,I=0;I<T.length;I++)(0,T[I])();return m}return N({type:"@@redux/INIT"}),(r={dispatch:N,subscribe:d,getState:A,replaceReducer:function(m){if(typeof m!==Q)throw new Error("next reducer"+Ne);o=m,N({type:"@@redux/INIT"})}})[nt]=function(){var m,T=d;return(m={subscribe:function(I){if(typeof I!="object")throw new TypeError("Observer != obj");function h(){I.next&&I.next(A())}return h(),{unsubscribe:T(h)}}})[nt]=function(){return this},m},r}function Xt(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+K}function pe(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function Wt(){var e=arguments;return function(t){return function(n,r,o){var u,c=t(n,r,o),f=c.dispatch,y={getState:c.getState,dispatch:function(v){return f(v)}};return u=[].slice.call(e).map(function(v){return v(y)}),p({},c,{dispatch:f=pe.apply(void 0,u)(c.dispatch)})}}}var Z=te+"anon_id",Y=te+"user_id",ie=te+"user_traits",jn={__proto__:null,ANON_ID:Z,USER_ID:Y,USER_TRAITS:ie},ee="userId",ge="anonymousId",_e=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Ce=["name","EVENTS","config","loaded"],g=_e.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),it=/^utm_/,at=/^an_prop_/,ot=/^an_trait_/;function Gt(e){var t=e.storage.setItem;return function(n){return function(r){return function(o){if(o.type===g.bootstrap){var u=o.params,c=o.user,f=o.persistedUser,y=o.initialUser,v=f.userId===c.userId;f.anonymousId!==c.anonymousId&&t(Z,c.anonymousId),v||t(Y,c.userId),y.traits&&t(ie,p({},v&&f.traits?f.traits:{},y.traits));var A=Object.keys(o.params);if(A.length){var d=u.an_uid,N=u.an_event,m=A.reduce(function(T,I){if(I.match(it)||I.match(/^(d|g)clid/)){var h=I.replace(it,"");T.campaign[h==="campaign"?"name":h]=u[I]}return I.match(at)&&(T.props[I.replace(at,"")]=u[I]),I.match(ot)&&(T.traits[I.replace(ot,"")]=u[I]),T},{campaign:{},props:{},traits:{}});n.dispatch(p({type:g.params,raw:u},m,d?{userId:d}:{})),d&&setTimeout(function(){return e.identify(d,m.traits)},0),N&&setTimeout(function(){return e.track(N,m.props)},0),Object.keys(m.campaign).length&&n.dispatch({type:g.campaign,campaign:m.campaign})}}return r(o)}}}}function Ht(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===g.setItemEnd){if(n.key===Z)return p({},t,{anonymousId:n.value});if(n.key===Y)return p({},t,{userId:n.value})}switch(n.type){case g.identify:return Object.assign({},t,{userId:n.userId,traits:p({},t.traits,n.traits)});case g.reset:return[Y,Z,ie].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function ut(e){return{userId:e.getItem(Y),anonymousId:e.getItem(Z),traits:e.getItem(ie)}}var Le=function(e){return te+"TEMP"+te+e};function Kt(e){var t=e.storage,n=t.setItem,r=t.removeItem,o=t.getItem;return function(u){return function(c){return function(f){var y=f.userId,v=f.traits,A=f.options;if(f.type===g.reset&&([Y,ie,Z].forEach(function(m){r(m)}),[ee,ge,"traits"].forEach(function(m){fe(Le(m))})),f.type===g.identify){o(Z)||n(Z,xe());var d=o(Y),N=o(ie)||{};d&&d!==y&&u.dispatch({type:g.userIdChanged,old:{userId:d,traits:N},new:{userId:y,traits:v},options:A}),y&&n(Y,y),v&&n(ie,p({},N,v))}return c(f)}}}}var be={};function ct(e,t){be[e]&&H(be[e])&&(be[e](t),delete be[e])}function st(e,t,n){return new Promise(function(r,o){return t()?r(e):n<1?o(p({},e,{queue:!0})):new Promise(function(u){return setTimeout(u,10)}).then(function(u){return st(e,t,n-10).then(r,o)})})}function lt(e,t,n){var r=t(),o=e.getState(),u=o.plugins,c=o.queue,f=o.user;if(!o.context.offline&&c&&c.actions&&c.actions.length){var y=c.actions.reduce(function(A,d,N){return u[d.plugin].loaded?(A.process.push(d),A.processIndex.push(N)):(A.requeue.push(d),A.requeueIndex.push(N)),A},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(y.processIndex&&y.processIndex.length){y.processIndex.forEach(function(A){var d=c.actions[A],N=d.plugin,m=d.payload.type,T=r[N][m];if(T&&H(T)){var I=function(O,_){return O===void 0&&(O={}),_===void 0&&(_={}),[ee,ge].reduce(function($,s){return O.hasOwnProperty(s)&&_[s]&&_[s]!==O[s]&&($[s]=_[s]),$},O)}(d.payload,f);T({payload:I,config:u[N].config,instance:n});var h=m+":"+N;e.dispatch(p({},I,{type:h,_:{called:h,from:"queueDrain"}}))}});var v=c.actions.filter(function(A,d){return!~y.processIndex.indexOf(d)});c.actions=v}}}var qe=function(e){var t=e.data,n=e.action,r=e.instance,o=e.state,u=e.allPlugins,c=e.allMatches,f=e.store,y=e.EVENTS;try{var v=o.plugins,A=o.context,d=n.type,N=d.match(me),m=t.exact.map(function(h){return h.pluginName});N&&(m=c.during.map(function(h){return h.pluginName}));var T=function(h,O){return function(_,$,s){var w=$.config,U=$.name,M=U+"."+_.type;s&&(M=s.event);var z=_.type.match(me)?function(V,D,J,L,B){return function(S,k){var X=L?L.name:V,R=k&&Ie(k)?k:J;if(L&&(!(R=k&&Ie(k)?k:[V]).includes(V)||R.length!==1))throw new Error("Method "+D+" can only abort "+V+" plugin. "+JSON.stringify(R)+" input valid");return p({},B,{abort:{reason:S,plugins:R,caller:D,_:X}})}}(U,M,O,s,_):function(V,D){return function(){throw new Error(V.type+" action not cancellable. Remove abort in "+D)}}(_,M);return{payload:Zt(_),instance:h,config:w||{},abort:z}}}(r,m),I=t.exact.reduce(function(h,O){var _=O.pluginName,$=O.methodName,s=!1;return $.match(/^initialize/)||$.match(/^reset/)||(s=!v[_].loaded),A.offline&&$.match(/^(page|track|identify)/)&&(s=!0),h[""+_]=s,h},{});return Promise.resolve(t.exact.reduce(function(h,O,_){try{var $=O.pluginName;return Promise.resolve(h).then(function(s){function w(){return Promise.resolve(s)}var U=function(){if(t.namespaced&&t.namespaced[$])return Promise.resolve(t.namespaced[$].reduce(function(M,z,V){try{return Promise.resolve(M).then(function(D){return z.method&&H(z.method)?(function(S,k){var X=yt(S);if(X&&X.name===k){var R=yt(X.method);throw new Error([k+" plugin is calling method "+S,"Plugins cant call self","Use "+X.method+" "+(R?"or "+R.method:"")+" in "+k+" plugin insteadof "+S].join(`
`))}}(z.methodName,z.pluginName),Promise.resolve(z.method({payload:D,instance:r,abort:(J=D,L=$,B=z.pluginName,function(S,k){return p({},J,{abort:{reason:S,plugins:k||[L],caller:d,from:B||L}})}),config:pt(z.pluginName,v,u),plugins:v})).then(function(S){var k=F(S)?S:{};return Promise.resolve(p({},D,k))})):D;var J,L,B})}catch(D){return Promise.reject(D)}},Promise.resolve(n))).then(function(M){s[$]=M});s[$]=n}();return U&&U.then?U.then(w):w()})}catch(s){return Promise.reject(s)}},Promise.resolve({}))).then(function(h){return Promise.resolve(t.exact.reduce(function(O,_,$){try{var s=t.exact.length===$+1,w=_.pluginName,U=u[w];return Promise.resolve(O).then(function(M){var z=h[w]?h[w]:{};if(N&&(z=M),Re(z,w))return Ve({data:z,method:d,instance:r,pluginName:w,store:f}),Promise.resolve(M);if(Re(M,w))return s&&Ve({data:M,method:d,instance:r,store:f}),Promise.resolve(M);if(I.hasOwnProperty(w)&&I[w]===!0)return f.dispatch({type:"queue",plugin:w,payload:z,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(M);var V=T(h[w],u[w]);return Promise.resolve(U[d]({abort:V.abort,payload:z,instance:r,config:pt(w,v,u),plugins:v})).then(function(D){var J=F(D)?D:{},L=p({},M,J),B=h[w];if(Re(B,w))Ve({data:B,method:d,instance:r,pluginName:w,store:f});else{var S=d+":"+w;(S.match(/:/g)||[]).length<2&&!d.match(ft)&&!d.match(dt)&&r.dispatch(p({},N?L:z,{type:S,_:{called:S,from:"submethod"}}))}return Promise.resolve(L)})})}catch(M){return Promise.reject(M)}},Promise.resolve(n))).then(function(O){if(!(d.match(me)||d.match(/^registerPlugin/)||d.match(dt)||d.match(ft)||d.match(/^params/)||d.match(/^userIdChanged/))){if(y.plugins.includes(d),O._&&O._.originalAction===d)return O;var _=p({},O,{_:{originalAction:O.type,called:O.type,from:"engineEnd"}});vt(O,t.exact.length)&&!d.match(/End$/)&&(_=p({},_,{type:O.type+"Aborted"})),f.dispatch(_)}return O})})}catch(h){return Promise.reject(h)}},me=/Start$/,ft=/^bootstrap/,dt=/^ready/;function Ve(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(p({},e.data,{type:n,_:{called:n,from:"abort"}}))}function pt(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function gt(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function mt(e,t){var n=e.replace(me,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function Re(e,t){var n=e.abort;return!!n&&(n===!0||ht(n,t)||n&&ht(n.plugins,t))}function vt(e,t){var n=e.abort;if(!n)return!1;if(n===!0||he(n))return!0;var r=n.plugins;return Ie(n)&&n.length===t||Ie(r)&&r.length===t}function Ie(e){return Array.isArray(e)}function ht(e,t){return!(!e||!Ie(e))&&e.includes(t)}function yt(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function Zt(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=F(e[n])?Object.assign({},e[n]):e[n]),t},{})}function Qt(e,t,n){var r={};return function(o){return function(u){return function(c){try{var f,y=function(s){return f?s:u(d)},v=c.type,A=c.plugins,d=c;if(c.abort)return Promise.resolve(u(c));if(v===g.enablePlugin&&o.dispatch({type:g.initializeStart,plugins:A,disabled:[],fromEnable:!0,meta:c.meta}),v===g.disablePlugin&&setTimeout(function(){return ct(c.meta.rid,{payload:c})},0),v===g.initializeEnd){var N=t(),m=Object.keys(N),T=m.filter(function(s){return A.includes(s)}).map(function(s){return N[s]}),I=[],h=[],O=c.disabled,_=T.map(function(s){var w=s.name;return st(s,s.loaded,1e4).then(function(U){return r[w]||(o.dispatch({type:g.pluginReadyType(w),name:w,events:Object.keys(s).filter(function(M){return!Ce.includes(M)})}),r[w]=!0),I=I.concat(w),s}).catch(function(U){if(U instanceof Error)throw new Error(U);return h=h.concat(U.name),U})});Promise.all(_).then(function(s){var w={plugins:I,failed:h,disabled:O};setTimeout(function(){m.length===_.length+O.length&&o.dispatch(p({},{type:g.ready},w))},0)})}var $=function(){if(v!==g.bootstrap)return/^ready:([^:]*)$/.test(v)&&setTimeout(function(){return lt(o,t,e)},0),Promise.resolve(function(s,w,U,M,z){try{var V=H(w)?w():w,D=s.type,J=D.replace(me,"");if(s._&&s._.called)return Promise.resolve(s);var L=U.getState(),B=(X=V,(R=L.plugins)===void 0&&(R={}),(a=s.options)===void 0&&(a={}),Object.keys(X).filter(function(i){var l=a.plugins||{};return Ct(l[i])?l[i]:l.all!==!1&&(!R[i]||R[i].enabled!==!1)}).map(function(i){return X[i]}));D===g.initializeStart&&s.fromEnable&&(B=Object.keys(L.plugins).filter(function(i){var l=L.plugins[i];return s.plugins.includes(i)&&!l.initialized}).map(function(i){return V[i]}));var S=B.map(function(i){return i.name}),k=function(i,l,P){var E=mt(i).map(function(b){return gt(b,l)});return l.reduce(function(b,q){var x=q.name,C=mt(i,x).map(function(ue){return gt(ue,l)}),j=C[0],G=C[1],oe=C[2];return j.length&&(b.beforeNS[x]=j),G.length&&(b.duringNS[x]=G),oe.length&&(b.afterNS[x]=oe),b},{before:E[0],beforeNS:{},during:E[1],duringNS:{},after:E[2],afterNS:{}})}(D,B);return Promise.resolve(qe({action:s,data:{exact:k.before,namespaced:k.beforeNS},state:L,allPlugins:V,allMatches:k,instance:U,store:M,EVENTS:z})).then(function(i){function l(){var b=function(){if(D.match(me))return Promise.resolve(qe({action:p({},P,{type:J+"End"}),data:{exact:k.after,namespaced:k.afterNS},state:L,allPlugins:V,allMatches:k,instance:U,store:M,EVENTS:z})).then(function(q){q.meta&&q.meta.hasCallback&&ct(q.meta.rid,{payload:q})})}();return b&&b.then?b.then(function(){return i}):i}if(vt(i,S.length))return i;var P,E=function(){if(D!==J)return Promise.resolve(qe({action:p({},i,{type:J}),data:{exact:k.during,namespaced:k.duringNS},state:L,allPlugins:V,allMatches:k,instance:U,store:M,EVENTS:z})).then(function(b){P=b});P=i}();return E&&E.then?E.then(l):l()})}catch(i){return Promise.reject(i)}var X,R,a}(c,t,e,o,n)).then(function(s){return f=1,u(s)})}();return Promise.resolve($&&$.then?$.then(y):y($))}catch(s){return Promise.reject(s)}}}}}function Yt(e){return function(t){return function(n){return function(r){var o=r.type,u=r.key,c=r.value,f=r.options;if(o===g.setItem||o===g.removeItem){if(r.abort)return n(r);o===g.setItem?e.setItem(u,c,f):e.removeItem(u,f)}return n(r)}}}}var en=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(o){return o===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(o){var u={getState:n.getState,dispatch:function(f){return n.dispatch(f)}},c=e[t].map(function(f){return f(u)});return pe.apply(void 0,c)(r)(o)}}}}};function tn(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var o=bt(n.type,"registerPlugin"),u=e()[o];if(!u||!o)return t;var c=n.enabled;return r[o]={enabled:c,initialized:!!c&&Boolean(!u.initialize),loaded:!!c&&Boolean(u.loaded()),config:u.config||{}},p({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var f=bt(n.type,g.initialize),y=e()[f];return y&&f?(r[f]=p({},t[f],{initialized:!0,loaded:Boolean(y.loaded())}),p({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=p({},t[n.name],{loaded:!0}),p({},t,r);switch(n.type){case g.disablePlugin:return p({},t,It(n.plugins,!1,t));case g.enablePlugin:return p({},t,It(n.plugins,!0,t));default:return t}}}function bt(e,t){return e.substring(t.length+1,e.length)}function It(e,t,n){return e.reduce(function(r,o){return r[o]=p({},n[o],{enabled:t}),r},n)}function wt(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var nn={last:{},history:[]};function rn(e,t){e===void 0&&(e=nn);var n=t.options,r=t.meta;if(t.type===g.track){var o=wt(p({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return p({},e,{last:o,history:e.history.concat(o)})}return e}var an={actions:[]};function on(e,t){e===void 0&&(e=an);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===g.identify?[t].concat(e.actions):e.actions.concat(t),p({},e,{actions:r});case"dequeue":return[];default:return e}}var St=/#.*$/;function un(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(St,""):"")}var Pt,Et,Ot,xt,cn=function(e){if(e===void 0&&(e={}),!W)return e;var t=document,n=t.title,r=t.referrer,o=window,u=o.location,c=o.innerWidth,f=o.innerHeight,y=u.hash,v=u.search,A=function(N){var m=function(){if(W){for(var T,I=document.getElementsByTagName("link"),h=0;T=I[h];h++)if(T.getAttribute("rel")==="canonical")return T.getAttribute("href")}}();return m?m.match(/\?/)?m:m+N:window.location.href.replace(St,"")}(v),d={title:n,url:A,path:un(A),hash:y,search:v,width:c,height:f};return r&&r!==""&&(d.referrer=r),p({},d,e)},sn={last:{},history:[]};function ln(e,t){e===void 0&&(e=sn);var n=t.options;if(t.type===g.page){var r=wt(p({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return p({},e,{last:r,history:e.history.concat(r)})}return e}Pt=function(){if(!W)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Et=W?document.referrer:null,Ot=Vt(),xt=Rt();var jt={initialized:!1,sessionId:xe(),app:null,version:null,debug:!1,offline:!!W&&!navigator.onLine,os:{name:Pt},userAgent:W?navigator.userAgent:"node",library:{name:"analytics",version:"0.10.23"},timezone:xt,locale:Ot,campaign:{},referrer:Et};function fn(e,t){e===void 0&&(e=jt);var n=e.initialized,r=t.campaign;switch(t.type){case g.campaign:return p({},e,{campaign:r});case g.offline:return p({},e,{offline:!0});case g.online:return p({},e,{offline:!1});default:return n?e:p({},jt,e,{initialized:!0})}}var dn=["plugins","reducers","storage"];function pn(e,t,n){if(W){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(o){r(o,t)})}}function gn(e){var t=pn.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function Nt(){return re("analytics",[]),function(e){return function(t,n,r){var o=e(t,n,r),u=o.dispatch;return Object.assign(o,{dispatch:function(c){return le[se].analytics.push(c.action||c),u(c)}})}}}function _t(e){return function(){return pe(pe.apply(null,arguments),Nt())}}function Je(e){return e?Lt(e)?e:[e]:[]}function kt(e,t,n){e===void 0&&(e={});var r,o,u=xe();return t&&(be[u]=(r=t,o=function(c){for(var f,y=c||Array.prototype.slice.call(arguments),v=0;v<y.length;v++)if(H(y[v])){f=y[v];break}return f}(n),function(c){o&&o(c),r(c)})),p({},e,{rid:u,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function mn(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(a,i){if(H(i))return a.middlewares=a.middlewares.concat(i),a;if(i.NAMESPACE&&(i.name=i.NAMESPACE),!i.name)throw new Error("https://lytics.dev/errors/1");var l=i.EVENTS?Object.keys(i.EVENTS).map(function(b){return i.EVENTS[b]}):[];a.pluginEnabled[i.name]=!(i.enabled===!1||i.config&&i.config.enabled===!1),delete i.enabled,i.methods&&(a.methods[i.name]=Object.keys(i.methods).reduce(function(b,q){var x;return b[q]=(x=i.methods[q],function(){for(var C=Array.prototype.slice.call(arguments),j=new Array(x.length),G=0;G<C.length;G++)j[G]=C[G];return j[j.length]=s,x.apply({instance:s},j)}),b},{}),delete i.methods);var P=Object.keys(i).concat(l),E=new Set(a.events.concat(P));if(a.events=Array.from(E),a.pluginsArray=a.pluginsArray.concat(i),a.plugins[i.name])throw new Error(i.name+"AlreadyLoaded");return a.plugins[i.name]=i,a.plugins[i.name].loaded||(a.plugins[i.name].loaded=function(){return!0}),a},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),o=e.storage?e.storage:{getItem:ne,setItem:re,removeItem:fe},u=function(a){return function(i,l,P){return l.getState("user")[i]||(P&&F(P)&&P[i]?P[i]:ut(a)[i]||ne(Le(i))||null)}}(o),c=r.plugins,f=r.events.filter(function(a){return!Ce.includes(a)}).sort(),y=new Set(f.concat(_e).filter(function(a){return!Ce.includes(a)})),v=Array.from(y).sort(),A=function(){return c},d=new en,N=d.addMiddleware,m=d.removeMiddleware,T=d.dynamicMiddlewares,I=function(){throw new Error("Abort disabled inListener")},h=Jt(),O=ut(o),_=p({},O,n,h.an_uid?{userId:h.an_uid}:{},h.an_aid?{anonymousId:h.an_aid}:{});_.anonymousId||(_.anonymousId=xe());var $=p({enable:function(a,i){return new Promise(function(l){S.dispatch({type:g.enablePlugin,plugins:Je(a),_:{originalAction:g.enablePlugin}},l,[i])})},disable:function(a,i){return new Promise(function(l){S.dispatch({type:g.disablePlugin,plugins:Je(a),_:{originalAction:g.disablePlugin}},l,[i])})}},r.methods),s={identify:function(a,i,l,P){try{var E=he(a)?a:null,b=F(a)?a:i,q=l||{},x=s.user();re(Le(ee),E);var C=E||b.userId||u(ee,s,b);return Promise.resolve(new Promise(function(j){S.dispatch(p({type:g.identifyStart,userId:C,traits:b||{},options:q,anonymousId:x.anonymousId},x.id&&x.id!==E&&{previousId:x.id}),j,[i,l,P])}))}catch(j){return Promise.reject(j)}},track:function(a,i,l,P){try{var E=F(a)?a.event:a;if(!E||!he(E))throw new Error("EventMissing");var b=F(a)?a:i||{},q=F(l)?l:{};return Promise.resolve(new Promise(function(x){S.dispatch({type:g.trackStart,event:E,properties:b,options:q,userId:u(ee,s,i),anonymousId:u(ge,s,i)},x,[i,l,P])}))}catch(x){return Promise.reject(x)}},page:function(a,i,l){try{var P=F(a)?a:{},E=F(i)?i:{};return Promise.resolve(new Promise(function(b){S.dispatch({type:g.pageStart,properties:cn(P),options:E,userId:u(ee,s,P),anonymousId:u(ge,s,P)},b,[a,i,l])}))}catch(b){return Promise.reject(b)}},user:function(a){if(a===ee||a==="id")return u(ee,s);if(a===ge||a==="anonId")return u(ge,s);var i=s.getState("user");return a?Ke(i,a):i},reset:function(a){return new Promise(function(i){S.dispatch({type:g.resetStart},i,a)})},ready:function(a){return s.on(g.ready,a)},on:function(a,i){if(!a||!H(i))return!1;if(a===g.bootstrap)throw new Error(".on disabled for "+a);var l=/Start$|Start:/;if(a==="*"){var P=function(x){return function(C){return function(j){return j.type.match(l)&&i({payload:j,instance:s,plugins:c}),C(j)}}},E=function(x){return function(C){return function(j){return j.type.match(l)||i({payload:j,instance:s,plugins:c}),C(j)}}};return N(P,ke),N(E,Ae),function(){m(P,ke),m(E,Ae)}}var b=a.match(l)?ke:Ae,q=function(x){return function(C){return function(j){return j.type===a&&i({payload:j,instance:s,plugins:c,abort:I}),C(j)}}};return N(q,b),function(){return m(q,b)}},once:function(a,i){if(!a||!H(i))return!1;if(a===g.bootstrap)throw new Error(".once disabled for "+a);var l=s.on(a,function(P){i({payload:P.payload,instance:s,plugins:c,abort:I}),l()});return l},getState:function(a){var i=S.getState();return a?Ke(i,a):Object.assign({},i)},dispatch:function(a){var i=he(a)?{type:a}:a;if(_e.includes(i.type))throw new Error("reserved action "+i.type);var l=p({},i,{_:p({originalAction:i.type},a._||{})});S.dispatch(l)},enablePlugin:$.enable,disablePlugin:$.disable,plugins:$,storage:{getItem:o.getItem,setItem:function(a,i,l){S.dispatch({type:g.setItemStart,key:a,value:i,options:l})},removeItem:function(a,i){S.dispatch({type:g.removeItemStart,key:a,options:i})}},setAnonymousId:function(a,i){s.storage.setItem(Z,a,i)},events:{core:_e,plugins:f}},w=r.middlewares.concat([function(a){return function(i){return function(l){return l.meta||(l.meta=kt()),i(l)}}},T(ke),Qt(s,A,{all:v,plugins:f}),Yt(o),Gt(s),Kt(s),T(Ae)]),U={context:fn,user:Ht(o),page:ln,track:rn,plugins:tn(A),queue:on},M=pe,z=pe;if(W&&e.debug){var V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;V&&(M=V({trace:!0,traceLimit:25})),z=function(){return arguments.length===0?Nt():F(typeof arguments[0])?_t():_t().apply(null,arguments)}}var D,J=function(a){return Object.keys(a).reduce(function(i,l){return dn.includes(l)||(i[l]=a[l]),i},{})}(e),L=r.pluginsArray.reduce(function(a,i){var l=i.name,P=i.config,E=i.loaded,b=r.pluginEnabled[l];return a[l]={enabled:b,initialized:!!b&&Boolean(!i.initialize),loaded:Boolean(E()),config:P||{}},a},{}),B={context:J,user:_,plugins:L},S=rt(function(a){for(var i=Object.keys(a),l={},P=0;P<i.length;P++){var E=i[P];typeof a[E]===Q&&(l[E]=a[E])}var b,q=Object.keys(l);try{(function(x){Object.keys(x).forEach(function(C){var j=x[C];if(typeof j(void 0,{type:"@@redux/INIT"})===K||typeof j(void 0,{type:Ft})===K)throw new Error("reducer "+C+" "+K)})})(l)}catch(x){b=x}return function(x,C){if(x===void 0&&(x={}),b)throw b;for(var j=!1,G={},oe=0;oe<q.length;oe++){var ue=q[oe],He=x[ue],ze=(0,l[ue])(He,C);if(typeof ze===K){var Ut=Xt(ue,C);throw new Error(Ut)}G[ue]=ze,j=j||ze!==He}return j?G:x}}(p({},U,t)),B,z(M(Wt.apply(void 0,w))));S.dispatch=(D=S.dispatch,function(a,i,l){var P=p({},a,{meta:kt(a.meta,i,Je(l))});return D.apply(null,[P])});var k=Object.keys(c);S.dispatch({type:g.bootstrap,plugins:k,config:J,params:h,user:_,initialUser:n,persistedUser:O});var X=k.filter(function(a){return r.pluginEnabled[a]}),R=k.filter(function(a){return!r.pluginEnabled[a]});return S.dispatch({type:g.registerPlugins,plugins:k,enabled:r.pluginEnabled}),r.pluginsArray.map(function(a,i){var l=a.bootstrap,P=a.config,E=a.name;l&&H(l)&&l({instance:s,config:P,payload:a}),S.dispatch({type:g.registerPluginType(E),name:E,enabled:r.pluginEnabled[E],plugin:a}),r.pluginsArray.length===i+1&&S.dispatch({type:g.initializeStart,plugins:X,disabled:R})}),gn(function(a){S.dispatch({type:a?g.offline:g.online})}),function(a,i,l){setInterval(function(){return lt(a,i,l)},3e3)}(S,A,s),s}var ke="before",Ae="after",we="cookie",ae=$t(),At=Te,vn=Te;function Tt(e){return ae?Te(e,"",-1):fe(e)}function $t(){if(ae!==void 0)return ae;var e="cookiecookie";try{Te(e,e),ae=document.cookie.indexOf(e)!==-1,Tt(e)}catch{ae=!1}return ae}function Te(e,t,n,r,o,u){if(typeof window!="undefined"){var c=arguments.length>1;return ae===!1&&(c?re(e,t):ne(e)),c?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(u?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Se="localStorage",hn=Ue.bind(null,"localStorage");de("localStorage","getItem",ne);de("localStorage","setItem",re);de("localStorage","removeItem",fe);var Pe="sessionStorage",yn=Ue.bind(null,"sessionStorage");de("sessionStorage","getItem",ne);de("sessionStorage","setItem",re);de("sessionStorage","removeItem",fe);function ve(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(F(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var bn=hn(),In=yn(),wn=$t();function Mt(e,t){if(e){var n=Be(t),r=!Ge(n),o=Fe(n)?ve(localStorage.getItem(e)):void 0;if(r&&!ce(o))return o;var u=Xe(n)?ve(At(e)):void 0;if(r&&u)return u;var c=We(n)?ve(sessionStorage.getItem(e)):void 0;if(r&&c)return c;var f=ne(e);return r?f:{localStorage:o,sessionStorage:c,cookie:u,global:f}}}function Sn(e,t,n){if(e&&!ce(t)){var r={},o=Be(n),u=JSON.stringify(t),c=!Ge(o);return Fe(o)&&(r[Se]=Me(Se,t,ve(localStorage.getItem(e))),localStorage.setItem(e,u),c)?r[Se]:Xe(o)&&(r[we]=Me(we,t,ve(At(e))),vn(e,u),c)?r[we]:We(o)&&(r[Pe]=Me(Pe,t,ve(sessionStorage.getItem(e))),sessionStorage.setItem(e,u),c)?r[Pe]:(r[ye]=Me(ye,t,ne(e)),re(e,t),c?r[ye]:r)}}function Pn(e,t){if(e){var n=Be(t),r=Mt(e,et),o={};return!ce(r.localStorage)&&Fe(n)&&(localStorage.removeItem(e),o[Se]=r.localStorage),!ce(r.cookie)&&Xe(n)&&(Tt(e),o[we]=r.cookie),!ce(r.sessionStorage)&&We(n)&&(sessionStorage.removeItem(e),o[Pe]=r.sessionStorage),!ce(r.global)&&$e(n,ye)&&(fe(e),o[ye]=r.global),o}}function Be(e){return e?he(e)?e:e.storage:Ye}function Fe(e){return bn&&$e(e,Se)}function Xe(e){return wn&&$e(e,we)}function We(e){return In&&$e(e,Pe)}function Ge(e){return e===et||e==="all"}function $e(e,t){return e===Ye||e===t||Ge(e)}function Me(e,t,n){return{location:e,current:t,previous:n}}var En={setItem:Sn,getItem:Mt,removeItem:Pn},On=En;function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zt(Object(n),!0).forEach(function(r){xn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:On};return mn(Dt(Dt({},t),e))}export{Nn as Analytics,jn as CONSTANTS,g as EVENTS,Nn as default,Nn as init};
